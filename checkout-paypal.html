<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Checkout PayPal - SbobinaMente</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif; background: #f3f4f6; }
        .container { max-width: 480px; margin: 40px auto; background: white; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); padding: 32px; }
        .summary { margin-bottom: 24px; }
        .summary-item { padding: 8px 0; border-bottom: 1px solid #eee; }
        .total { font-size: 22px; font-weight: bold; color: #4a90e2; margin-bottom: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <h2 style="margin-bottom: 18px;">Checkout PayPal</h2>
        <div class="total" id="total">Totale: -</div>
        <div class="summary" id="summary"></div>
        <div id="paypalReactRoot"></div>
    </div>
    <script>
        // Carica il carrello e mostra il riepilogo
        const pendingOrder = JSON.parse(localStorage.getItem('pendingOrder') || '{}');
        const items = pendingOrder.items || [];
        const totalValue = pendingOrder.total || '0.00'; // <-- rinominato per evitare conflitto

        document.getElementById('total').textContent = 'Totale: ' + totalValue + '€';

        let itemsHtml = '';
        items.forEach(item => {
            itemsHtml += `
                <div class="summary-item">
                    <strong>${item.title}</strong> × ${item.quantity} — <span style="color:#4a90e2;">${(item.prezzo * item.quantity).toFixed(2)}€</span>
                </div>
            `;
        });
        document.getElementById('summary').innerHTML = itemsHtml;
    </script>
    <!-- Carica React e il componente CheckoutPage -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script type="module">
        import CheckoutPage from "./api/components/CheckoutPage.js";
        const root = document.getElementById('paypalReactRoot');
        const totalValue = parseFloat(localStorage.getItem('pendingOrder') ? JSON.parse(localStorage.getItem('pendingOrder')).total : '0');
        ReactDOM.createRoot(root).render(React.createElement(CheckoutPage, { amount: totalValue }));
    </script>
    <!--
  Assicurati che questo file sia nella stessa directory di index.html.
  Se invece usi una sottocartella (es: /pages/checkout.html), aggiorna tutti i link e i redirect a /pages/checkout.html.
  Esempio: <a href="/pages/checkout.html">Checkout</a>
-->
</body>
</html>
